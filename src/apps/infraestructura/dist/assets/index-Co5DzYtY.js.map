{"version":3,"file":"index-Co5DzYtY.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/lucide-react/dist/esm/shared/src/utils.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/Icon.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/activity.js","../../node_modules/lucide-react/dist/esm/icons/droplets.js","../../node_modules/lucide-react/dist/esm/icons/gauge.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/layers-3.js","../../node_modules/lucide-react/dist/esm/icons/maximize-2.js","../../node_modules/lucide-react/dist/esm/icons/pen-line.js","../../node_modules/lucide-react/dist/esm/icons/play.js","../../node_modules/lucide-react/dist/esm/icons/rotate-ccw.js","../../node_modules/lucide-react/dist/esm/icons/triangle-alert.js","../../src/components/ui/Button.tsx","../../src/components/Legend.tsx","../../src/layout/auto.ts","../../src/data/graph.ts","../../src/utils/paths.ts","../../src/hooks/useEdgesForScenario.ts","../../src/components/diagram/Edge.tsx","../../src/components/diagram/nodes.tsx","../../src/hooks/useDragNode.ts","../../src/utils/nodeDims.ts","../../src/layout/layoutIO.ts","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && array.indexOf(className) === index;\n}).join(\" \");\n\nexport { mergeClasses, toKebabCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => {\n    return createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: mergeClasses(\"lucide\", className),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    );\n  }\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(`lucide-${toKebabCase(iconName)}`, className),\n      ...props\n    })\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"Activity\", [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Droplets = createLucideIcon(\"Droplets\", [\n  [\n    \"path\",\n    {\n      d: \"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z\",\n      key: \"1ptgy4\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97\",\n      key: \"1sl1rz\"\n    }\n  ]\n]);\n\nexport { Droplets as default };\n//# sourceMappingURL=droplets.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Gauge = createLucideIcon(\"Gauge\", [\n  [\"path\", { d: \"m12 14 4-4\", key: \"9kzdfg\" }],\n  [\"path\", { d: \"M3.34 19a10 10 0 1 1 17.32 0\", key: \"19p75a\" }]\n]);\n\nexport { Gauge as default };\n//# sourceMappingURL=gauge.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Info = createLucideIcon(\"Info\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n]);\n\nexport { Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Layers3 = createLucideIcon(\"Layers3\", [\n  [\n    \"path\",\n    {\n      d: \"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z\",\n      key: \"8b97xw\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"m6.08 9.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59\",\n      key: \"1e5n1m\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"m6.08 14.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59\",\n      key: \"1iwflc\"\n    }\n  ]\n]);\n\nexport { Layers3 as default };\n//# sourceMappingURL=layers-3.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Maximize2 = createLucideIcon(\"Maximize2\", [\n  [\"polyline\", { points: \"15 3 21 3 21 9\", key: \"mznyad\" }],\n  [\"polyline\", { points: \"9 21 3 21 3 15\", key: \"1avn1i\" }],\n  [\"line\", { x1: \"21\", x2: \"14\", y1: \"3\", y2: \"10\", key: \"ota7mn\" }],\n  [\"line\", { x1: \"3\", x2: \"10\", y1: \"21\", y2: \"14\", key: \"1atl0r\" }]\n]);\n\nexport { Maximize2 as default };\n//# sourceMappingURL=maximize-2.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PenLine = createLucideIcon(\"PenLine\", [\n  [\"path\", { d: \"M12 20h9\", key: \"t2du7b\" }],\n  [\n    \"path\",\n    {\n      d: \"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z\",\n      key: \"1ykcvy\"\n    }\n  ]\n]);\n\nexport { PenLine as default };\n//# sourceMappingURL=pen-line.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"6 3 20 12 6 21 6 3\", key: \"1oa8hb\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RotateCcw = createLucideIcon(\"RotateCcw\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n]);\n\nexport { RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","/**\n * @license lucide-react v0.451.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TriangleAlert = createLucideIcon(\"TriangleAlert\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","import React from 'react'\n\ntype Props = React.ButtonHTMLAttributes<HTMLButtonElement> & {\n  variant?: 'default' | 'ghost' | 'outline'\n  size?: 'sm' | 'md' | 'lg'\n}\n\nexport default function Button({ className = '', variant = 'default', size = 'sm', ...props }: Props) {\n  return (\n    <button\n      className={`inline-flex items-center gap-2 rounded-2xl text-sm font-medium shadow-sm transition active:scale-[.98]\n        ${size === 'sm' ? 'px-3 py-1.5' : size === 'lg' ? 'px-5 py-3' : 'px-4 py-2'}\n        ${variant === 'default' ? 'bg-slate-900 text-white hover:bg-slate-800' : ''}\n        ${variant === 'ghost' ? 'bg-transparent hover:bg-slate-100' : ''}\n        ${variant === 'outline' ? 'border border-slate-300 hover:bg-slate-50' : ''}\n        ${className}`}\n      {...props}\n    />\n  )\n}\n","import React from 'react'\n\nexport default function Legend() {\n  return (\n    <div className=\"flex flex-wrap items-center gap-3 text-xs\">\n      <span className=\"inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs bg-emerald-100 text-emerald-700\">\n        <span className=\"h-2 w-2 rounded-full bg-emerald-500 inline-block\" /> Activo\n      </span>\n      <span className=\"inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs bg-amber-100 text-amber-800\">\n        <span className=\"h-2 w-2 rounded-full bg-amber-500 inline-block\" /> Standby / Regulación\n      </span>\n      <span className=\"inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs bg-rose-100 text-rose-700\">\n        <span className=\"h-2 w-2 rounded-full bg-rose-600 inline-block\" /> Falla / Cerrado\n      </span>\n      <span className=\"inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs bg-sky-100 text-sky-700\">\n        <span className=\"h-2 w-2 rounded-full bg-sky-600 inline-block\" /> Flujo\n      </span>\n      <span className=\"text-[10px] text-slate-500\">Grosor de línea ≈ diámetro</span>\n    </div>\n  )\n}\n","// src/layout/auto.ts\r\nimport type { NodeBase } from '@/data/graph'\r\n\r\ntype NodeInput = Omit<NodeBase, 'x' | 'y'> & Partial<Pick<NodeBase, 'x' | 'y'>>\r\n\r\n/**\r\n * computeAutoLayout:\r\n *  - Mantiene columnas X fijas para ruteo Manhattan sin cruces.\r\n *  - Si un nodo trae x/y, se respeta; si no, se calcula.\r\n */\r\nexport function computeAutoLayout(base: NodeInput[]): NodeBase[] {\r\n  const byId = new Map<string, NodeInput>(base.map(n => [n.id, n]))\r\n\r\n  // Columnas (X) fijas\r\n  const X = {\r\n    plant: 140,           // P1..P7\r\n    manifold: 300,        // MC\r\n    branches: 500,        // M8, M10\r\n    outValves: 660,       // V8, V10\r\n    principals: 860,      // TP, TA (+ P8/P9 boosters al frente)\r\n    highValves: 1020,     // VTA1..3\r\n    highTanks: 1180,      // TA1..3 y TG\r\n\r\n    // NUEVO: Planta Este (a la derecha de principales, antes de highTanks)\r\n    eastPumps: 940,       // P10..P12\r\n    eastManifold: 1080,   // ME (cerca de highValves, sin interferir)\r\n  } as const\r\n\r\n  // Spacing bomba planta\r\n  const pumpTop = 80\r\n  const pumpGap = 60\r\n\r\n  // Grupos\r\n  const plantPumps = ['P1','P2','P3','P4','P5','P6','P7'].filter(id => byId.has(id))\r\n  const eastPumps  = ['P10','P11','P12'].filter(id => byId.has(id))\r\n  const highVals   = ['VTA1','VTA2','VTA3'].filter(id => byId.has(id))\r\n  const highTanks  = ['TA1','TA2','TA3'].filter(id => byId.has(id))\r\n\r\n  const pumpsBottom = pumpTop + pumpGap * Math.max(plantPumps.length - 1, 0)\r\n  const pumpsCenterY = Math.round((pumpTop + pumpsBottom) / 2) // ≈ 260\r\n\r\n  // 1) Planta\r\n  plantPumps.forEach((id, i) => {\r\n    const n = byId.get(id)!\r\n    n.x ??= X.plant\r\n    n.y ??= pumpTop + pumpGap * i\r\n  })\r\n\r\n  // 2) Colectoras planta\r\n  byId.get('MC')  && ((byId.get('MC')!.x ??= X.manifold), (byId.get('MC')!.y ??= pumpsCenterY))\r\n  byId.get('M8')  && ((byId.get('M8')!.x ??= X.branches), (byId.get('M8')!.y ??= pumpsCenterY - 80))\r\n  byId.get('M10') && ((byId.get('M10')!.x ??= X.branches), (byId.get('M10')!.y ??= pumpsCenterY + 60))\r\n\r\n  // 3) Válvulas de salida planta\r\n  byId.get('V8')  && ((byId.get('V8')!.x  ??= X.outValves), (byId.get('V8')!.y  ??= byId.get('M8')?.y  ?? (pumpsCenterY - 80)))\r\n  byId.get('V10') && ((byId.get('V10')!.x ??= X.outValves), (byId.get('V10')!.y ??= byId.get('M10')?.y ?? (pumpsCenterY + 60)))\r\n\r\n  // 4) Tanques principales\r\n  byId.get('TP') && ((byId.get('TP')!.x ??= X.principals), (byId.get('TP')!.y ??= pumpsCenterY - 40)) // ≈ 220\r\n  byId.get('TA') && ((byId.get('TA')!.x ??= X.principals), (byId.get('TA')!.y ??= pumpsCenterY + 120)) // ≈ 380\r\n\r\n  // 5) Boosters del Pulmón delante de TP/TA (misma caja)\r\n  const TANK_HALF = 60\r\n  const PUMP_HALF = 26\r\n  const GAP_SIDE  = 18\r\n  const boosterX  = X.principals - (TANK_HALF + GAP_SIDE + PUMP_HALF)\r\n  byId.get('P8') && ((byId.get('P8')!.x ??= boosterX), (byId.get('P8')!.y ??= byId.get('TP')?.y ?? (pumpsCenterY - 40)))\r\n  byId.get('P9') && ((byId.get('P9')!.x ??= boosterX), (byId.get('P9')!.y ??= byId.get('TA')?.y ?? (pumpsCenterY + 120)))\r\n  byId.get('MB') && ((byId.get('MB')!.x ??= X.highValves), (byId.get('MB')!.y ??= byId.get('TP')?.y ?? pumpsCenterY))\r\n\r\n  // 6) Válvulas hacia tanques altos + 7) Tanques altos (alineados)\r\n  const highTop = (byId.get('TP')?.y ?? 220) - 140\r\n  const highGap = 60\r\n  highVals.forEach((id, i) => { const v = byId.get(id)!; v.x ??= X.highValves; v.y ??= highTop + highGap * i })\r\n  highTanks.forEach((id, i) => {\r\n    const t = byId.get(id)!\r\n    t.x ??= X.highTanks\r\n    const vId = ('V' + id) as any // VTA1..3\r\n    t.y ??= byId.get(vId)?.y ?? (highTop + highGap * i)\r\n  })\r\n\r\n  // 8) Gravedad\r\n  byId.get('VG') && ((byId.get('VG')!.x ??= X.highValves), (byId.get('VG')!.y ??= byId.get('TA')?.y ?? (pumpsCenterY + 120)))\r\n  byId.get('TG') && ((byId.get('TG')!.x ??= X.highTanks),  (byId.get('TG')!.y ??= (byId.get('VG')?.y ?? (pumpsCenterY + 120)) + 80))\r\n\r\n  // --- NUEVO: Planta Este (tres bombas) ---\r\n  if (eastPumps.length) {\r\n    const eastTop = (byId.get('TA')?.y ?? 380) + 140 // debajo de TA\r\n    eastPumps.forEach((id, i) => {\r\n      const n = byId.get(id)!\r\n      n.x ??= X.eastPumps\r\n      n.y ??= eastTop + i * 60\r\n    })\r\n    // Colectora de Planta Este centrada con sus bombas\r\n    if (byId.has('ME')) {\r\n      const m = byId.get('ME')!\r\n      m.x ??= X.eastManifold\r\n      const y1 = byId.get(eastPumps[0])?.y ?? eastTop\r\n      const yN = byId.get(eastPumps[eastPumps.length - 1])?.y ?? eastTop\r\n      m.y ??= Math.round((y1 + yN) / 2)\r\n    }\r\n  }\r\n\r\n  // --- NUEVO: Colectora de tanques altos -> bomba PB ---\r\n  if (byId.has('MTAH')) {\r\n    const m = byId.get('MTAH')!\r\n    const midHighY =\r\n      byId.get('VTA2')?.y ??\r\n      Math.round(((byId.get('TA1')?.y ?? highTop) + (byId.get('TA3')?.y ?? (highTop + 2 * highGap))) / 2)\r\n\r\n    m.x ??= X.highValves\r\n    m.y ??= midHighY\r\n\r\n    if (byId.has('PB')) {\r\n      const pb = byId.get('PB')!\r\n      // bomba a la izquierda de MTAH, alineada en Y\r\n      const pbX = X.highValves - (TANK_HALF + GAP_SIDE + PUMP_HALF) // similar a boosters\r\n      pb.x ??= pbX\r\n      pb.y ??= m.y\r\n    }\r\n  }\r\n\r\n  // Ensamble final garantizando x/y definidos\r\n  return base.map(n => ({\r\n    ...n,\r\n    x: (n.x ?? byId.get(n.id)!.x!) as number,\r\n    y: (n.y ?? byId.get(n.id)!.y!) as number,\r\n  })) as NodeBase[]\r\n}\r\n","// src/data/graph.ts\nimport { computeAutoLayout } from '@/layout/auto'\n\n// Tipos\nexport type NodeType = 'tank' | 'pump' | 'valve' | 'manifold'\n\nexport type NodeBase = {\n  id: string; type: NodeType; name: string; x: number; y: number;\n  level?: number; capacity?: number;                         // tanks\n  status?: 'on' | 'standby' | 'fault' | 'unknown'; kW?: number; // pumps\n  state?: 'open' | 'closed' | 'throttle';                    // valves\n}\n\n// (Opcional) podés forzar x/y manual en algún nodo; si no, el auto-layout lo posiciona.\nexport const BASE_NODES: Array<Omit<NodeBase, 'x' | 'y'> & Partial<Pick<NodeBase, 'x' | 'y'>>> = [\n  // Tanques altos\n  { id: 'TA1', type: 'tank', name: 'Tanque Alto 1', level: 0.42, capacity: 600 },\n  { id: 'TA2', type: 'tank', name: 'Tanque Alto 2', level: 0.33, capacity: 550 },\n  { id: 'TA3', type: 'tank', name: 'Tanque Alto 3', level: 0.37, capacity: 520 },\n\n  // Tanques principales\n  { id: 'TP', type: 'tank', name: 'Tanque Pulmón', level: 0.55, capacity: 1500 },\n  { id: 'TA', type: 'tank', name: 'Tanque Almacén', level: 0.68, capacity: 1800 },\n\n  // Gravedad destino\n  { id: 'TG', type: 'tank', name: 'Tanque Gravedad', level: 0.61, capacity: 700 },\n\n  // Planta: 7 bombas\n  { id: 'P1', type: 'pump', name: 'Bomba P1', status: 'on', kW: 22 },\n  { id: 'P2', type: 'pump', name: 'Bomba P2', status: 'on', kW: 22 },\n  { id: 'P3', type: 'pump', name: 'Bomba P3', status: 'standby', kW: 22 },\n  { id: 'P4', type: 'pump', name: 'Bomba P4', status: 'on', kW: 22 },\n  { id: 'P5', type: 'pump', name: 'Bomba P5', status: 'standby', kW: 22 },\n  { id: 'P6', type: 'pump', name: 'Bomba P6', status: 'on', kW: 22 },\n  { id: 'P7', type: 'pump', name: 'Bomba P7', status: 'fault', kW: 22 },\n\n  // Colectoras de planta\n  { id: 'MC',  type: 'manifold', name: 'Colectora Planta' },\n  { id: 'M8',  type: 'manifold', name: 'Colectora Ø8\"' },\n  { id: 'M10', type: 'manifold', name: 'Colectora Ø10\"' },\n\n  // Válvulas de salida de planta\n  { id: 'V8',  type: 'valve', name: 'V-Ø8',  state: 'open' },\n  { id: 'V10', type: 'valve', name: 'V-Ø10', state: 'open' },\n\n  // Bombas del Pulmón\n  { id: 'P8', type: 'pump', name: 'Bomba P8 (Pulmón)', status: 'on', kW: 18 },\n  { id: 'P9', type: 'pump', name: 'Bomba P9 (Pulmón)', status: 'standby', kW: 18 },\n\n  // Colectora del Pulmón (une P8/P9 antes de ir a VTAx)\n  { id: 'MB', type: 'manifold', name: 'Colectora Pulmón' },\n\n  // Válvulas a tanques altos\n  { id: 'VTA1', type: 'valve', name: 'V-TA1', state: 'open' },\n  { id: 'VTA2', type: 'valve', name: 'V-TA2', state: 'open' },\n  { id: 'VTA3', type: 'valve', name: 'V-TA3', state: 'throttle' },\n\n  // Gravedad\n  { id: 'VG', type: 'valve', name: 'V-Gravedad', state: 'open' },\n\n  // --- NUEVO: Planta Este (3 bombas) + su colectora -> TG ---\n  { id: 'P10', type: 'pump', name: 'Bomba P10 (Planta Este)', status: 'on', kW: 18 },\n  { id: 'P11', type: 'pump', name: 'Bomba P11 (Planta Este)', status: 'standby', kW: 18 },\n  { id: 'P12', type: 'pump', name: 'Bomba P12 (Planta Este)', status: 'standby', kW: 18 },\n  { id: 'ME',  type: 'manifold', name: 'Colectora Planta Este' },\n\n  // --- NUEVO: Colectora de tanques altos -> bomba dedicada ---\n  { id: 'MTAH', type: 'manifold', name: 'Colectora Tanques Altos' },\n  { id: 'PB',   type: 'pump',     name: 'Bomba Colectora Altos', status: 'standby', kW: 15 },\n]\n\n// ¡Aquí se calcula todo el layout!\nexport const NODES: NodeBase[] = computeAutoLayout(BASE_NODES)\n\n// ------ Aristas y escenarios ------\n\n// ✅ Definí el tipo de caño una vez\nexport type Pipe = '8' | '10' | 'G'\n\n// ✅ La tercera posición de la tupla es OPCIONAL (sin null/undefined raro)\nexport type EdgeDef = [string, string, Pipe?]\n\nexport const EDGES_BASE: EdgeDef[] = [\n  // Planta -> colectora\n  ['P1','MC'], ['P2','MC'], ['P3','MC'], ['P4','MC'], ['P5','MC'], ['P6','MC'], ['P7','MC'],\n\n  // Colectora -> ramales\n  ['MC','M8','8'],\n  ['MC','M10','10'],\n\n  // Ramales -> válvulas de salida\n  ['M8','V8','8'],\n  ['M10','V10','10'],\n\n  // Válvulas -> tanques principales\n  ['V8','TP','8'],\n  ['V10','TA','10'],\n\n  // Pulmón -> bombas booster -> colectora -> VTAx\n  ['TP','P8'], ['TP','P9'],\n  ['P8','MB'], ['P9','MB'],\n  ['MB','VTA1'], ['MB','VTA2'], ['MB','VTA3'],\n  ['VTA1','TA1'], ['VTA2','TA2'], ['VTA3','TA3'],\n\n  // Gravedad desde Almacén\n  ['TA','VG','G'],\n  ['VG','TG','G'],\n\n  // --- NUEVO: Planta Este (3 bombas) -> colectora -> TG ---\n  ['P10','ME'], ['P11','ME'], ['P12','ME'],\n  ['ME','TG','10'],\n\n  // --- NUEVO: Colectora de tanques altos -> bomba dedicada ---\n  ['TA1','MTAH'], ['TA2','MTAH'], ['TA3','MTAH'],\n  ['MTAH','PB'],\n]\n\n// Escenarios con claves <A>B como \"A>B\"\nexport const SCENARIOS = {\n  Normal: {\n    active: [\n      'MC>M8','M8>V8','V8>TP',\n      'MC>M10','M10>V10','V10>TA',\n      'TP>P8','P8>MB','MB>VTA1','MB>VTA2','MB>VTA3',\n      'VTA1>TA1','VTA2>TA2','VTA3>TA3',\n      'TA>VG','VG>TG',\n      'P10>ME','ME>TG',\n      // 'TA1>MTAH','TA2>MTAH','TA3>MTAH','MTAH>PB',\n    ],\n    note: 'Ø8→Pulmón, Ø10→Almacén. P8 impulsa a VTA1/2/3. P10 apoya a TG.',\n  },\n  'Pulmón dual': {\n    active: [\n      'MC>M8','M8>V8','V8>TP',\n      'MC>M10','M10>V10','V10>TA',\n      'TP>P8','TP>P9','P8>MB','P9>MB',\n      'MB>VTA1','MB>VTA2','MB>VTA3',\n      'VTA1>TA1','VTA2>TA2','VTA3>TA3',\n      'TA>VG','VG>TG',\n      'P10>ME','ME>TG',\n    ],\n    note: 'P8 y P9 alimentan colectora; Planta Este apoya TG.',\n  },\n  'Sólo Ø8': {\n    active: [\n      'MC>M8','M8>V8','V8>TP',\n      'TP>P8','P8>MB','MB>VTA1','MB>VTA2','MB>VTA3',\n      'VTA1>TA1','VTA2>TA2','VTA3>TA3',\n      'P10>ME','ME>TG',\n    ],\n    note: 'Ø10 fuera; Pulmón con P8 → VTA1/2/3. TG con Planta Este.',\n  },\n  'Sólo Ø10': {\n    active: ['MC>M10','M10>V10','V10>TA','TA>VG','VG>TG','P10>ME','ME>TG'],\n    note: 'Ø8 fuera; Almacén y Planta Este sostienen.',\n  },\n  Emergencia: {\n    active: [\n      'MC>M8','M8>V8','V8>TP',\n      'TP>P9','P9>MB','MB>VTA3','VTA3>TA3',\n      'MC>M10','M10>V10','V10>TA',\n      'P10>ME','ME>TG',\n    ],\n    note: 'Falla P8: P9 prioriza TA3. Ø10 sostiene Almacén. Planta Este mantiene TG.',\n  }\n} as const\n\nexport const NODES_LIST: NodeBase[] = NODES\nexport const byId: Record<string, NodeBase> =\n  Object.fromEntries(NODES.map(n => [n.id, n])) as any\n","import { byId } from '@/data/graph'\n\nexport function edgeKey(a: string, b: string) {\n  return `${a}>${b}`\n}\n\nexport function orthogonalPath(a: string, b: string) {\n  const A = byId[a]; const B = byId[b]\n  const midX = (A.x + B.x) / 2\n  return `M ${A.x} ${A.y} L ${midX} ${A.y} L ${midX} ${B.y} L ${B.x} ${B.y}`\n}\n","// src/hooks/useEdgesForScenario.ts\nimport { useMemo } from 'react'\nimport { EDGES_BASE, SCENARIOS, type Pipe } from '@/data/graph'\nimport { edgeKey } from '@/utils/paths'\n\ntype EdgeOut = {\n  a: string\n  b: string\n  pipe?: Pipe\n  active: boolean\n}\n\nexport default function useEdgesForScenario(scenario: keyof typeof SCENARIOS) {\n  return useMemo<EdgeOut[]>(() => {\n    // Conjunto de claves activas \"A>B\" del escenario seleccionado\n    const activeKeys = SCENARIOS[scenario].active as readonly string[]\n    const activeSet = new Set<string>(activeKeys)\n\n    // Normalizamos pipe a undefined (nunca null) y resolvemos si está activa\n    return EDGES_BASE.map(([a, b, pipe]): EdgeOut => ({\n      a,\n      b,\n      pipe: pipe ?? undefined,\n      active: activeSet.has(edgeKey(a, b) as string),\n    }))\n    // EDGES_BASE/SCENARIOS son constantes; con scenario alcanza\n  }, [scenario])\n}\n","import React from 'react'\nimport { byId } from '@/data/graph'\nimport { orthogonalPath } from '@/utils/paths'\n\nexport default function Edge({ a, b, pipe, active }: { a:string;b:string;pipe?: '8' | '10' | 'G'; active: boolean }) {\n  const A = byId[a]; const B = byId[b]\n  if (!A || !B) return null\n  const path = orthogonalPath(a, b)\n  const strokeWidth = pipe === '10' ? 4 : pipe === '8' ? 3.5 : pipe === 'G' ? 3 : 3\n  const pipeLabel = pipe === '10' ? 'Ø10\"' : pipe === '8' ? 'Ø8\"' : pipe === 'G' ? 'Gravedad' : ''\n  const mx = (A.x + B.x) / 2\n  const my = (A.y + B.y) / 2 - 6\n\n  return (\n    <g>\n      <path d={path} className={`${active ? 'stroke-sky-600 flowing' : 'stroke-slate-300'}`} style={{ strokeWidth, fill: 'none' }} markerEnd=\"url(#arrow)\" />\n      {pipeLabel && (\n        <text x={mx} y={my} textAnchor=\"middle\" className=\"fill-slate-500 text-[10px]\">{pipeLabel}</text>\n      )}\n    </g>\n  )\n}\n","import React from 'react'\nimport { Droplets } from 'lucide-react'\nimport { byId, type NodeBase } from '@/data/graph'\n\nexport function GroupBox({\n  x, y, w, h, label,\n}: { x:number; y:number; w:number; h:number; label:string }) {\n  return (\n    <g>\n      <rect x={x} y={y} width={w} height={h} rx={14} className=\"fill-slate-50 stroke-slate-200\" />\n      <rect x={x} y={y} width={w} height={h} rx={14} fill=\"none\" className=\"stroke-slate-300\" strokeDasharray=\"6 6\" />\n      <text x={x + 12} y={y + 20} className=\"fill-slate-500 text-[12px]\">{label}</text>\n    </g>\n  )\n}\n\n/**\n * AutoGroupBox: calcula una caja que engloba automáticamente a los nodos indicados.\n * - pad: margen interno uniforme\n * - grow: expansión opcional por lado (left/right/top/bottom) para dar más “aire”\n */\nexport function AutoGroupBox({\n  ids, label, pad = 28, grow = { left: 0, right: 0, top: 0, bottom: 0 },\n}: {\n  ids: string[]\n  label: string\n  pad?: number\n  grow?: { left?: number; right?: number; top?: number; bottom?: number }\n}) {\n  const pts = ids.map(id => byId[id]).filter(Boolean) as NodeBase[]\n  if (!pts.length) return null\n\n  const xs = pts.map(p => p.x)\n  const ys = pts.map(p => p.y)\n\n  const minX = Math.min(...xs) - pad - (grow.left ?? 0)\n  const maxX = Math.max(...xs) + pad + (grow.right ?? 0)\n  const minY = Math.min(...ys) - pad - (grow.top ?? 0)\n  const maxY = Math.max(...ys) + pad + (grow.bottom ?? 0)\n\n  const w = maxX - minX\n  const h = maxY - minY\n\n  return <GroupBox x={minX} y={minY} w={w} h={h} label={label} />\n}\n\nexport function Tank({ n }: { n: NodeBase }) {\n  const level = n.level ?? 0\n  const levelH = 60 * level\n  return (\n    <g>\n      <rect x={n.x - 60} y={n.y - 40} width={120} height={80} rx={12} className=\"fill-white stroke-slate-300\" />\n      <rect x={n.x - 45} y={n.y - 25} width={90} height={50} rx={8} className=\"fill-slate-100 stroke-slate-200\" />\n      <rect x={n.x - 45} y={n.y - 25 + (50 - levelH)} width={90} height={levelH} className=\"fill-sky-300/70\" />\n      <text x={n.x} y={n.y - 50} textAnchor=\"middle\" className=\"fill-slate-800 text-[12px] font-semibold\">{n.name}</text>\n      <text x={n.x} y={n.y + 38} textAnchor=\"middle\" className=\"fill-slate-600 text-[11px]\">\n        Nivel {(level * 100).toFixed(0)}% • {n.capacity} m³\n      </text>\n    </g>\n  )\n}\n\nexport function Pump({ n }: { n: NodeBase }) {\n  return (\n    <g>\n      <circle cx={n.x} cy={n.y} r={26} className=\"fill-white stroke-slate-300\" />\n      <Droplets width={18} height={18} x={n.x - 9} y={n.y - 9} className=\"stroke-slate-700\" />\n      <circle\n        cx={n.x + 27}\n        cy={n.y - 27}\n        r={6}\n        className={`stroke-white ${\n          n.status === 'on'\n            ? 'fill-emerald-500'\n            : n.status === 'standby'\n            ? 'fill-amber-500'\n            : n.status === 'fault'\n            ? 'fill-rose-600'\n            : 'fill-slate-400'\n        }`}\n      />\n      <text x={n.x} y={n.y + 36} textAnchor=\"middle\" className=\"fill-slate-800 text-[12px] font-semibold\">{n.name}</text>\n      <text x={n.x} y={n.y + 52} textAnchor=\"middle\" className=\"fill-slate-600 text-[11px]\">{n.kW} kW</text>\n    </g>\n  )\n}\n\nexport function Valve({ n }: { n: NodeBase }) {\n  const color = n.state === 'open' ? 'fill-emerald-500' : n.state === 'closed' ? 'fill-rose-600' : 'fill-amber-500'\n  return (\n    <g>\n      <rect x={n.x - 16} y={n.y - 10} width={32} height={20} rx={4} className=\"fill-white stroke-slate-300\" />\n      <circle cx={n.x} cy={n.y} r={7} className={`stroke-white ${color}`} />\n      <text x={n.x} y={n.y + 26} textAnchor=\"middle\" className=\"fill-slate-700 text-[11px]\">{n.name} • {n.state}</text>\n    </g>\n  )\n}\n\nexport function Manifold({ n }: { n: NodeBase }) {\n  return (\n    <g>\n      <rect x={n.x - 50} y={n.y - 8} width={100} height={16} rx={6} className=\"fill-slate-200 stroke-slate-300\" />\n      <text x={n.x} y={n.y - 14} textAnchor=\"middle\" className=\"fill-slate-600 text-[11px]\">{n.name}</text>\n    </g>\n  )\n}\n","// src/hooks/useDragNode.ts\r\nimport { useRef, useCallback } from 'react'\r\nimport { byId } from '@/data/graph'\r\n\r\ntype Opts = {\r\n  id: string\r\n  enabled: boolean\r\n  snap?: number\r\n  onChange?: (x: number, y: number) => void\r\n  onEnd?: () => void\r\n  debug?: boolean\r\n}\r\n\r\n/** Convierte coordenadas de pantalla a coords del viewBox del SVG */\r\nfunction clientToSvg(svg: SVGSVGElement, cx: number, cy: number) {\r\n  const rect = svg.getBoundingClientRect()\r\n  const vb = svg.viewBox.baseVal\r\n  const x = ((cx - rect.left) / rect.width) * vb.width + vb.x\r\n  const y = ((cy - rect.top) / rect.height) * vb.height + vb.y\r\n  return { x, y }\r\n}\r\n\r\nexport default function useDragNode({ id, enabled, snap = 10, onChange, onEnd, debug }: Opts) {\r\n  const dragging = useRef(false)\r\n  const grabDx = useRef(0)\r\n  const grabDy = useRef(0)\r\n  const svgRef = useRef<SVGSVGElement | null>(null)\r\n  const raf = useRef<number | null>(null)\r\n\r\n  const tick = (fn: () => void) => {\r\n    if (raf.current != null) return\r\n    raf.current = requestAnimationFrame(() => {\r\n      raf.current = null\r\n      fn()\r\n    })\r\n  }\r\n\r\n  const handleMove = useCallback((e: PointerEvent) => {\r\n    if (!dragging.current || !svgRef.current) return\r\n    const svg = svgRef.current\r\n    const n = byId[id]\r\n    if (!n) return\r\n\r\n    const { x: mx, y: my } = clientToSvg(svg, e.clientX, e.clientY)\r\n\r\n    let x = mx + grabDx.current\r\n    let y = my + grabDy.current\r\n\r\n    const s = Math.max(1, snap)\r\n    x = Math.round(x / s) * s\r\n    y = Math.round(y / s) * s\r\n\r\n    const vb = svg.viewBox.baseVal\r\n    // límites del viewBox, con pequeño margen\r\n    x = Math.max(vb.x + 10, Math.min(vb.x + vb.width - 10, x))\r\n    y = Math.max(vb.y + 10, Math.min(vb.y + vb.height - 10, y))\r\n\r\n    n.x = x\r\n    n.y = y\r\n\r\n    if (debug) console.debug('[drag] move', id, '→', x, y)\r\n    if (onChange) tick(() => onChange(x, y))\r\n  }, [id, snap, onChange, debug])\r\n\r\n  const handleUp = useCallback((e: PointerEvent) => {\r\n    if (!dragging.current) return\r\n    dragging.current = false\r\n    if (debug) console.debug('[drag] up', id)\r\n    window.removeEventListener('pointermove', handleMove, { passive: true } as any)\r\n    window.removeEventListener('pointerup', handleUp, { passive: true } as any)\r\n    onEnd?.()\r\n  }, [id, handleMove, onEnd, debug])\r\n\r\n  const onPointerDown = useCallback((e: React.PointerEvent<SVGElement>) => {\r\n    if (!enabled) return\r\n    const svg = (e.currentTarget.ownerSVGElement || (e.currentTarget as any)) as SVGSVGElement | null\r\n    if (!svg) return\r\n    svgRef.current = svg\r\n\r\n    const { x: sx, y: sy } = clientToSvg(svg, e.clientX, e.clientY)\r\n    const n = byId[id]\r\n    grabDx.current = (n?.x ?? 0) - sx\r\n    grabDy.current = (n?.y ?? 0) - sy\r\n\r\n    dragging.current = true\r\n    if (debug) console.debug('[drag] down', id, 'client=', e.clientX, e.clientY)\r\n\r\n    // Intentamos pointer capture, pero igual agregamos listeners globales para máxima robustez\r\n    ;(e.currentTarget as Element).setPointerCapture?.(e.pointerId)\r\n\r\n    window.addEventListener('pointermove', handleMove, { passive: true } as any)\r\n    window.addEventListener('pointerup', handleUp, { passive: true } as any)\r\n\r\n    e.preventDefault()\r\n  }, [enabled, id, handleMove, handleUp, debug])\r\n\r\n  const onPointerMove = useCallback((e: React.PointerEvent<SVGElement>) => {\r\n    // fallback: si el browser no emite pointermove global, procesamos acá\r\n    if (!dragging.current) return\r\n    handleMove(e.nativeEvent)\r\n  }, [handleMove])\r\n\r\n  const onPointerUp = useCallback((e: React.PointerEvent<SVGElement>) => {\r\n    handleUp(e.nativeEvent)\r\n  }, [handleUp])\r\n\r\n  return { onPointerDown, onPointerMove, onPointerUp }\r\n}\r\n","// src/utils/nodeDims.ts\r\nexport type Half = { halfW: number; halfH: number }\r\n\r\nexport function nodeHalfSize(type: string): Half {\r\n  switch (type) {\r\n    case 'tank':     return { halfW: 60, halfH: 40 } // 120x80\r\n    case 'pump':     return { halfW: 26, halfH: 26 } // círculo r=26\r\n    case 'valve':    return { halfW: 16, halfH: 10 } // 32x20\r\n    case 'manifold': return { halfW: 50, halfH: 8 }  // 100x16\r\n    default:         return { halfW: 24, halfH: 24 }\r\n  }\r\n}\r\n","// src/utils/layoutIO.ts\r\nimport { byId } from '@/data/graph'\r\n\r\nexport type NodePos = { id: string; x: number; y: number }\r\n\r\n// versión del esquema guardado (cambiá si modificás ids o layout)\r\nconst LS_KEY = 'acuaducto-layout-v1'\r\n\r\n/** Devuelve un array {id,x,y} con la posición actual de todos los nodos */\r\nexport function exportLayout(): NodePos[] {\r\n  return Object.values(byId).map(n => ({ id: n.id, x: n.x, y: n.y }))\r\n}\r\n\r\n/** Aplica un array {id,x,y} a los nodos existentes (ignora ids desconocidos) */\r\nexport function importLayout(layout: NodePos[]) {\r\n  const map = new Map(layout.map(p => [p.id, p]))\r\n  for (const id in byId) {\r\n    const pos = map.get(id)\r\n    if (pos) {\r\n      byId[id].x = pos.x\r\n      byId[id].y = pos.y\r\n    }\r\n  }\r\n}\r\n\r\n/** Guarda el layout actual en localStorage */\r\nexport function saveLayoutToStorage() {\r\n  try {\r\n    const json = JSON.stringify(exportLayout())\r\n    localStorage.setItem(LS_KEY, json)\r\n  } catch (e) {\r\n    // silent\r\n  }\r\n}\r\n\r\n/** Intenta cargar layout desde localStorage. Devuelve true si cargó ok. */\r\nexport function loadLayoutFromStorage(): boolean {\r\n  try {\r\n    const raw = localStorage.getItem(LS_KEY)\r\n    if (!raw) return false\r\n    const arr = JSON.parse(raw) as NodePos[]\r\n    if (!Array.isArray(arr)) return false\r\n    importLayout(arr)\r\n    return true\r\n  } catch {\r\n    return false\r\n  }\r\n}\r\n\r\n/** Borra el layout guardado (por si necesitás resetear manualmente) */\r\nexport function clearSavedLayout() {\r\n  try { localStorage.removeItem(LS_KEY) } catch {}\r\n}\r\n","// src/App.tsx\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport {\n  Layers3,\n  Play,\n  Info,\n  Activity,\n  Gauge,\n  AlertTriangle,\n  Edit3,\n  RotateCcw,\n  Maximize2,\n} from \"lucide-react\";\n\nimport Button from \"@/components/ui/Button\";\nimport Legend from \"@/components/Legend\";\nimport { NODES, SCENARIOS, byId, BASE_NODES } from \"@/data/graph\";\nimport useEdgesForScenario from \"@/hooks/useEdgesForScenario\";\nimport Edge from \"@/components/diagram/Edge\";\nimport { Tank, Pump, Valve, Manifold, AutoGroupBox } from \"@/components/diagram/nodes\";\nimport useDragNode from \"@/hooks/useDragNode\";\nimport { nodeHalfSize } from \"@/utils/nodeDims\";\nimport { computeAutoLayout } from \"@/layout/auto\";\nimport {\n  exportLayout,\n  importLayout,\n  saveLayoutToStorage,\n  loadLayoutFromStorage,\n} from \"./layout/layoutIO\";\n\n// --------------------------\n// Utils\n// --------------------------\nconst preventMiddleAux: React.MouseEventHandler<any> = (e) => {\n  if ((e as any).button === 1) {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n};\n\ntype ViewBox = { x: number; y: number; w: number; h: number };\n\nfunction nodesBBox(nodes = NODES) {\n  let minX = +Infinity,\n    minY = +Infinity,\n    maxX = -Infinity,\n    maxY = -Infinity;\n  for (const n of nodes) {\n    const { halfW, halfH } = nodeHalfSize(n.type);\n    minX = Math.min(minX, n.x - halfW);\n    minY = Math.min(minY, n.y - halfH);\n    maxX = Math.max(maxX, n.x + halfW);\n    maxY = Math.max(maxY, n.y + halfH);\n  }\n  const pad = 120;\n  minX -= pad;\n  minY -= pad;\n  maxX += pad;\n  maxY += pad;\n  return { minX, minY, maxX, maxY, w: maxX - minX, h: maxY - minY };\n}\n\nexport default function App() {\n  const [scenario, setScenario] = useState<keyof typeof SCENARIOS>(\"Normal\");\n  const [edit, setEdit] = useState(false);\n  const [tick, setTick] = useState(0); // re-render (edges / group boxes)\n  const edges = useEdgesForScenario(scenario);\n\n  // --------------------------\n  // ViewBox (pan & zoom state)\n  // --------------------------\n  const svgRef = useRef<SVGSVGElement | null>(null);\n  const [vb, setVb] = useState<ViewBox>(() => {\n    const bb = nodesBBox();\n    return { x: bb.minX, y: bb.minY, w: bb.w, h: bb.h };\n  });\n  const vbRef = useRef(vb);\n  vbRef.current = vb;\n\n  // rAF gate para reducir renders\n  const rafRef = useRef<number | null>(null);\n  const scheduleTick = () => {\n    if (rafRef.current == null) {\n      rafRef.current = requestAnimationFrame(() => {\n        setTick((t) => t + 1);\n        rafRef.current = null;\n      });\n    }\n  };\n\n  // fit to content (al montar y en doble click)\n  const fitToContent = () => {\n    const bb = nodesBBox();\n    setVb({ x: bb.minX, y: bb.minY, w: bb.w, h: bb.h });\n    console.log(\"[App] fitToContent →\", { vb: { x: bb.minX, y: bb.minY, w: bb.w, h: bb.h } });\n  };\n\n  // helper para aplicar zoom centrado bajo el cursor\n  function zoomBy(deltaY: number, clientX: number, clientY: number) {\n    const svg = svgRef.current!;\n    const rect = svg.getBoundingClientRect();\n    const { x, y, w, h } = vbRef.current;\n\n    const px = x + ((clientX - rect.left) / rect.width) * w;\n    const py = y + ((clientY - rect.top) / rect.height) * h;\n\n    const k = Math.pow(1.0015, deltaY); // deltaY>0 aleja, <0 acerca\n    const nw = Math.max(200, Math.min(50000, w * k));\n    const nh = Math.max(200, Math.min(50000, h * k));\n\n    const nx = px - ((px - x) * nw) / w;\n    const ny = py - ((py - y) * nh) / h;\n\n    setVb({ x: nx, y: ny, w: nw, h: nh });\n  }\n\n  // Mount + listeners\n  useEffect(() => {\n    console.groupCollapsed(\"[App] mount\");\n    console.log(\"nodes\", NODES.length, \"edges\", edges.length, \"scenario\", scenario);\n    console.groupEnd();\n\n    // cargar layout guardado (si existe)\n    const loaded = loadLayoutFromStorage();\n    if (loaded) {\n      console.log(\"[App] layout cargado desde storage\");\n      scheduleTick();\n    }\n\n    // auto-fit inicial\n    fitToContent();\n\n    // listener nativo para Ctrl/⌘ + wheel (passive:false)\n    const svg = svgRef.current;\n    if (!svg) return;\n\n    const onWheelNative = (e: WheelEvent) => {\n      if (e.ctrlKey || e.metaKey) {\n        e.preventDefault(); // evita zoom de la página\n        zoomBy(e.deltaY, e.clientX, e.clientY);\n      }\n    };\n    svg.addEventListener(\"wheel\", onWheelNative, { passive: false });\n\n    // re-fit al cambiar tamaño del contenedor (restaurar ventana)\n    const ro = new ResizeObserver(() => {\n      fitToContent();\n    });\n    const host = svg.parentElement;\n    if (host) ro.observe(host);\n\n    return () => {\n      svg.removeEventListener(\"wheel\", onWheelNative);\n      ro.disconnect();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Log de cambios de escenario y edges\n  useEffect(() => {\n    console.groupCollapsed(\"[App] scenario change\");\n    console.log(\"scenario:\", scenario);\n    console.log(\"edges:\", edges.length);\n    console.groupEnd();\n  }, [scenario, edges.length]);\n\n  // Log de cambios de viewBox\n  useEffect(() => {\n    console.log(\"[App] viewBox\", vb);\n  }, [vb]);\n\n  // --------------------------\n  // Pan con ruedita PRESIONADA\n  // --------------------------\n  const panning = useRef({\n    active: false,\n    start: { x: 0, y: 0 },\n    vb0: { x: 0, y: 0, w: 0, h: 0 } as ViewBox,\n  });\n\n  function startPan(e: React.PointerEvent) {\n    const svg = svgRef.current!;\n    e.preventDefault();\n    svg.setPointerCapture(e.pointerId);\n    panning.current.active = true;\n    panning.current.start = { x: e.clientX, y: e.clientY };\n    panning.current.vb0 = vbRef.current;\n  }\n\n  function movePan(e: React.PointerEvent) {\n    if (!panning.current.active) return;\n    const svg = svgRef.current!;\n    const rect = svg.getBoundingClientRect();\n\n    const dxClient = e.clientX - panning.current.start.x;\n    const dyClient = e.clientY - panning.current.start.y;\n\n    const sx = vbRef.current.w / rect.width;\n    const sy = vbRef.current.h / rect.height;\n\n    const nx = panning.current.vb0.x - dxClient * sx;\n    const ny = panning.current.vb0.y - dyClient * sy;\n\n    setVb((prev) => ({ ...prev, x: nx, y: ny }));\n  }\n\n  function endPan(e: React.PointerEvent) {\n    const svg = svgRef.current!;\n    try {\n      svg.releasePointerCapture(e.pointerId);\n    } catch {}\n    panning.current.active = false;\n  }\n\n  const onSvgPointerDown: React.PointerEventHandler<SVGSVGElement> = (e) => {\n    // Middle button = pan (sólo mientras presionado)\n    if (e.button === 1) startPan(e);\n  };\n  const onSvgPointerMove: React.PointerEventHandler<SVGSVGElement> = (e) => movePan(e);\n  const onSvgPointerUp: React.PointerEventHandler<SVGSVGElement> = (e) => endPan(e);\n  const onSvgPointerCancel: React.PointerEventHandler<SVGSVGElement> = (e) => endPan(e);\n\n  // --------------------------\n  // Overlay draggable por nodo\n  // --------------------------\n  const DraggableOverlay: React.FC<{ id: string }> = ({ id }) => {\n    const n = byId[id];\n    const { halfW, halfH } = nodeHalfSize(n?.type ?? \"tank\");\n    const [pressed, setPressed] = useState(false);\n\n    const drag = useDragNode({\n      id,\n      enabled: edit,\n      snap: 10,\n      debug: false,\n      onChange: () => {\n        saveLayoutToStorage();\n        scheduleTick();\n      },\n      onEnd: () => {\n        setPressed(false);\n        console.log(\"[Drag] end\", id, \"→\", { x: byId[id].x, y: byId[id].y });\n      },\n    });\n\n    const x = n.x - halfW - 8;\n    const y = n.y - halfH - 8;\n    const w = halfW * 2 + 16;\n    const h = halfH * 2 + 16;\n\n    const onDown: React.PointerEventHandler<SVGRectElement> = (e) => {\n      // si es middle, no iniciamos drag del nodo -> lo toma el pan del SVG\n      if (e.button === 1) return;\n      setPressed(true);\n      drag.onPointerDown(e as any);\n      console.log(\"[Drag] start\", id);\n    };\n\n    return (\n      <g>\n        {pressed && (\n          <rect\n            x={x - 3}\n            y={y - 3}\n            width={w + 6}\n            height={h + 6}\n            rx={10}\n            fill=\"none\"\n            stroke=\"rgb(56 189 248)\"\n            strokeWidth={2}\n            pointerEvents=\"none\"\n          />\n        )}\n        <rect\n          x={x}\n          y={y}\n          width={w}\n          height={h}\n          rx={8}\n          fill=\"black\"\n          fillOpacity={0.04}\n          pointerEvents={edit ? (\"all\" as any) : (\"none\" as any)}\n          stroke={edit ? (pressed ? \"rgb(56 189 248)\" : \"rgb(203 213 225)\") : \"none\"}\n          strokeWidth={edit ? 1.5 : 0}\n          strokeDasharray={edit ? \"4 4\" : undefined}\n          style={{ cursor: edit ? (pressed ? \"grabbing\" : \"grab\") : \"default\" }}\n          onPointerDown={onDown}\n          onPointerMove={(e) => drag.onPointerMove(e as any)}\n          onPointerUp={(e) => {\n            setPressed(false);\n            drag.onPointerUp(e as any);\n          }}\n          onPointerCancel={(e) => {\n            setPressed(false);\n            drag.onPointerUp(e as any);\n          }}\n          onLostPointerCapture={() => setPressed(false)}\n          onContextMenu={(e) => e.preventDefault()}\n          onAuxClick={preventMiddleAux}\n        />\n      </g>\n    );\n  };\n\n  // --------------------------\n  // Reset de auto-layout\n  // --------------------------\n  function resetAuto() {\n    console.log(\"[Layout] reset auto\");\n    const fresh = computeAutoLayout(BASE_NODES);\n    for (const f of fresh) {\n      if (byId[f.id]) {\n        byId[f.id].x = f.x;\n        byId[f.id].y = f.y;\n      }\n    }\n    saveLayoutToStorage();\n    scheduleTick();\n    fitToContent();\n  }\n\n  // --------------------------\n  // Export / Import\n  // --------------------------\n  function doExportJSON() {\n    const data = exportLayout();\n    console.log(\"[Layout] export JSON\", data);\n    const blob = new Blob([JSON.stringify(data, null, 2)], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = \"layout-acueducto.json\";\n    a.click();\n    URL.revokeObjectURL(url);\n  }\n  function doImportJSON(file: File) {\n    const reader = new FileReader();\n    reader.onload = () => {\n      try {\n        const arr = JSON.parse(String(reader.result));\n        importLayout(arr);\n        saveLayoutToStorage();\n        scheduleTick();\n        fitToContent();\n        console.log(\"[Layout] import OK\", arr);\n      } catch (err) {\n        console.error(\"[Layout] import ERROR\", err);\n        alert(\"Archivo inválido\");\n      }\n    };\n    reader.readAsText(file);\n  }\n  const importInputRef = useRef<HTMLInputElement | null>(null);\n\n  return (\n    <div className=\"min-h-screen w-full bg-slate-50\">\n      <style>{`\n        @keyframes dash { to { stroke-dashoffset: -24; } }\n        .flowing { stroke-dasharray: 4 8; animation: dash 1.4s linear infinite; opacity: 0.9; }\n        text { user-select: none; }\n      `}</style>\n\n      {/* Header */}\n      <div className=\"sticky top-0 z-10 backdrop-blur supports-[backdrop-filter]:bg-white/60 bg-white/90 border-b border-slate-200\">\n        <div className=\"mx-auto max-w-[1600px] px-6 py-3 flex flex-wrap items-center justify-between gap-3\">\n          <div className=\"flex items-center gap-3\">\n            <Layers3 className=\"h-5 w-5 text-slate-700\" />\n            <h1 className=\"text-lg font-semibold text-slate-900\">Acuaducto — Vista General (hardcode)</h1>\n          </div>\n          <div className=\"flex flex-wrap items-center gap-2\">\n            {Object.keys(SCENARIOS).map((name) => (\n              <Button\n                key={name}\n                variant={scenario === (name as any) ? \"default\" : \"outline\"}\n                onClick={() => setScenario(name as any)}\n                title={`Escenario: ${name}`}\n              >\n                <Play className=\"h-4 w-4\" /> {name}\n              </Button>\n            ))}\n            <Button variant={edit ? \"default\" : \"outline\"} onClick={() => setEdit((e) => !e)} title=\"Mover nodos\">\n              <Edit3 className=\"h-4 w-4\" /> {edit ? \"Editando\" : \"Editar\"}\n            </Button>\n            <Button variant=\"outline\" onClick={fitToContent} title=\"Encajar todo (doble click en el lienzo)\">\n              <Maximize2 className=\"h-4 w-4\" /> Fit\n            </Button>\n            <Button variant=\"ghost\" onClick={resetAuto} title=\"Recalcular posiciones automáticamente\">\n              <RotateCcw className=\"h-4 w-4\" /> Reset\n            </Button>\n            <Button variant=\"outline\" onClick={doExportJSON} title=\"Exportar posiciones a JSON\">\n              Exportar\n            </Button>\n            <label className=\"inline-flex\">\n              <input\n                ref={importInputRef}\n                type=\"file\"\n                accept=\"application/json\"\n                className=\"hidden\"\n                onChange={(e) => {\n                  const f = e.currentTarget.files?.[0];\n                  if (f) doImportJSON(f);\n                  e.currentTarget.value = \"\";\n                }}\n              />\n              <Button\n                variant=\"outline\"\n                title=\"Importar posiciones desde JSON\"\n                onClick={() => importInputRef.current?.click()}\n              >\n                Importar\n              </Button>\n            </label>\n            <Button variant=\"ghost\" title=\"Sólo demo visual, datos hardcodeados\">\n              <Info className=\"h-4 w-4\" /> Demo\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Canvas + paneles abajo */}\n      <div className=\"mx-auto max-w-[1600px] px-6 py-6 space-y-6\">\n        {/* Canvas */}\n        <div className=\"rounded-2xl bg-white p-4 shadow-sm border border-slate-200\">\n          <div className=\"mb-3 flex items-center justify-between\">\n            <Legend />\n            <div className=\"text-sm text-slate-600\">\n              Escenario: <span className=\"font-medium text-slate-900\">{scenario}</span>\n              {edit && <span className=\"ml-3 text-emerald-700 font-medium\">Modo edición</span>}\n              <span className=\"ml-3 text-slate-400\">\n                Ctrl/⌘ + rueda = Zoom • Ruedita presionada = Pan • Doble clic = Fit\n              </span>\n            </div>\n          </div>\n\n          <div className=\"relative w-full overflow-hidden rounded-xl border border-slate-200\">\n            <svg\n              ref={svgRef}\n              viewBox={`${vb.x} ${vb.y} ${vb.w} ${vb.h}`}\n              className=\"w-full h-[72vh] bg-white\"\n              style={{ touchAction: \"none\" }}\n              onAuxClick={preventMiddleAux}\n              onPointerDown={onSvgPointerDown}\n              onPointerMove={onSvgPointerMove}\n              onPointerUp={onSvgPointerUp}\n              onPointerCancel={onSvgPointerCancel}\n              onDoubleClick={fitToContent}\n            >\n              <defs>\n                <marker\n                  id=\"arrow\"\n                  viewBox=\"0 0 10 10\"\n                  refX=\"8\"\n                  refY=\"5\"\n                  markerWidth=\"6\"\n                  markerHeight=\"6\"\n                  orient=\"auto-start-reverse\"\n                >\n                  <path d=\"M 0 0 L 10 5 L 0 10 z\" className=\"fill-current text-slate-400\" />\n                </marker>\n                <pattern id=\"grid\" width=\"40\" height=\"40\" patternUnits=\"userSpaceOnUse\">\n                  <path d=\"M 40 0 L 0 0 0 40\" fill=\"none\" stroke=\"#e5e7eb\" strokeWidth=\"1\" />\n                </pattern>\n              </defs>\n\n              {/* fondo cuadriculado grande para pan infinito */}\n              <rect\n                x={vb.x - vb.w * 5}\n                y={vb.y - vb.h * 5}\n                width={vb.w * 10}\n                height={vb.h * 10}\n                fill=\"url(#grid)\"\n                onAuxClick={preventMiddleAux}\n              />\n\n              {/* Agrupaciones automáticas */}\n              <AutoGroupBox\n                ids={[\"P1\", \"P2\", \"P3\", \"P4\", \"P5\", \"P6\", \"P7\", \"MC\"]}\n                label=\"Planta\"\n                pad={36}\n                grow={{ right: 30, top: 10, bottom: 14 }}\n              />\n              <AutoGroupBox\n                ids={[\"TP\", \"TA\", \"P8\", \"P9\", \"MB\"]}\n                label=\"Tanques principales\"\n                pad={34}\n                grow={{ left: 12 }}\n              />\n              <AutoGroupBox ids={[\"TA1\", \"TA2\", \"TA3\"]} label=\"Tanques altos\" pad={30} />\n              <AutoGroupBox ids={[\"VG\", \"TG\"]} label=\"Distribución por gravedad\" pad={28} grow={{ right: 20 }} />\n\n              {/* Edges debajo */}\n              {edges.map((e) => (\n                <Edge key={`${e.a}-${e.b}-${tick}`} {...e} />\n              ))}\n\n              {/* Nodes + overlay draggable */}\n              {NODES.map((n) => {\n                const elem =\n                  n.type === \"tank\" ? (\n                    <Tank key={n.id} n={n} />\n                  ) : n.type === \"pump\" ? (\n                    <Pump key={n.id} n={n} />\n                  ) : n.type === \"valve\" ? (\n                    <Valve key={n.id} n={n} />\n                  ) : n.type === \"manifold\" ? (\n                    <Manifold key={n.id} n={n} />\n                  ) : null;\n                return (\n                  <g key={`wrap-${n.id}`}>\n                    {elem}\n                    <DraggableOverlay id={n.id} />\n                  </g>\n                );\n              })}\n            </svg>\n          </div>\n\n          <div className=\"mt-3 text-sm text-slate-700\">{SCENARIOS[scenario].note}</div>\n        </div>\n\n        {/* Paneles abajo */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm\">\n            <div className=\"mb-2 flex items-center gap-2 text-slate-800 font-semibold\">\n              <Activity className=\"h-4 w-4\" /> Estado de Bombas\n            </div>\n            <ul className=\"space-y-2 text-sm\">\n              {NODES.filter((n) => n.type === \"pump\").map((p) => (\n                <li key={p.id} className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2\">\n                    <span\n                      className={`inline-block h-2.5 w-2.5 rounded-full ${\n                        p.status === \"on\"\n                          ? \"bg-emerald-500\"\n                          : p.status === \"standby\"\n                          ? \"bg-amber-500\"\n                          : p.status === \"fault\"\n                          ? \"bg-rose-600\"\n                          : \"bg-slate-400\"\n                      }`}\n                    />\n                    {p.name}\n                  </div>\n                  <span className=\"text-slate-600\">{p.kW} kW</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm\">\n            <div className=\"mb-2 flex items-center gap-2 text-slate-800 font-semibold\">\n              <Gauge className=\"h-4 w-4\" /> Niveles de Tanque\n            </div>\n            <ul className=\"space-y-2 text-sm\">\n              {NODES.filter((n) => n.type === \"tank\").map((t) => (\n                <li key={t.id} className=\"flex items-center justify-between\">\n                  <span>{t.name}</span>\n                  <span className=\"tabular-nums font-medium\">{(((t.level ?? 0) * 100) | 0).toString()}%</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm\">\n            <div className=\"mb-2 flex items-center gap-2 text-slate-800 font-semibold\">\n              <AlertTriangle className=\"h-4 w-4\" /> Alarmas (demo)\n            </div>\n            <ul className=\"space-y-2 text-sm\">\n              <li className=\"flex items-center justify-between\">\n                <span>P7 fuera de servicio</span>\n                <span className=\"inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs bg-rose-100 text-rose-700\">\n                  Crítica\n                </span>\n              </li>\n              <li className=\"flex items-center justify-between\">\n                <span>V-TA3 en estrangulación</span>\n                <span className=\"inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs bg-amber-100 text-amber-800\">\n                  Atención\n                </span>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport './index.css'\nimport App from './App'\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n)\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","toKebabCase","string","mergeClasses","classes","className","index","array","defaultAttributes","Icon","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","children","iconNode","rest","ref","createElement","tag","attrs","createLucideIcon","iconName","Component","props","Activity","Droplets","Gauge","Info","Layers3","Maximize2","PenLine","Play","RotateCcw","TriangleAlert","Button","variant","jsx","Legend","jsxs","computeAutoLayout","base","byId","X","pumpTop","pumpGap","plantPumps","id","eastPumps","highVals","highTanks","pumpsBottom","pumpsCenterY","i","_a","_b","_c","_d","_e","_f","_g","_i","_h","_j","_l","_k","_m","_n","_o","_p","TANK_HALF","PUMP_HALF","GAP_SIDE","boosterX","_q","_s","_r","_t","_v","_u","_w","_y","_x","highTop","_z","highGap","v","t","vId","_A","_C","_B","_D","_F","_E","eastTop","_G","y1","_H","yN","_I","midHighY","_J","_K","_L","pb","pbX","BASE_NODES","NODES","EDGES_BASE","SCENARIOS","edgeKey","orthogonalPath","A","B","midX","useEdgesForScenario","scenario","useMemo","activeKeys","activeSet","pipe","Edge","active","path","pipeLabel","mx","my","GroupBox","x","y","w","label","AutoGroupBox","ids","pad","grow","pts","xs","ys","minX","maxX","minY","maxY","Tank","level","levelH","Pump","Valve","Manifold","clientToSvg","svg","cx","cy","rect","vb","useDragNode","enabled","snap","onChange","onEnd","debug","dragging","useRef","grabDx","grabDy","svgRef","raf","tick","fn","handleMove","useCallback","s","handleUp","onPointerDown","sx","sy","onPointerMove","onPointerUp","nodeHalfSize","type","LS_KEY","exportLayout","importLayout","layout","map","pos","saveLayoutToStorage","json","loadLayoutFromStorage","raw","arr","preventMiddleAux","nodesBBox","nodes","halfW","halfH","App","setScenario","useState","edit","setEdit","setTick","edges","setVb","bb","vbRef","rafRef","scheduleTick","fitToContent","zoomBy","deltaY","clientX","clientY","px","py","nw","nh","nx","ny","useEffect","onWheelNative","ro","host","panning","startPan","movePan","dxClient","dyClient","prev","endPan","onSvgPointerDown","onSvgPointerMove","onSvgPointerUp","onSvgPointerCancel","DraggableOverlay","pressed","setPressed","drag","onDown","resetAuto","fresh","doExportJSON","data","blob","url","doImportJSON","file","reader","err","importInputRef","name","Edit3","elem","AlertTriangle","ReactDOM","React"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}